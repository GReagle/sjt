#!/bin/sh

cd "$SJ_DIR"

outfiles=`find . -name out`
tail -f -n5 $outfiles | while IFS= read -r line; do
	printf '%s\a\n' "$line"
done &
tailpid=$!
while true; do
	new_outfiles=`find . -name out`
	if [ "$outfiles" != "$new_outfiles" ] ; then
		outfiles="$new_outfiles"
		kill $tailpid
		tail -f -n5 $outfiles | while IFS= read -r line; do
			 printf '%s\a\n' "$line"
		done &
		tailpid=$!
	fi
	sleep 5
done
kill $tailpid
